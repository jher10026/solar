<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SolarGuard Andahuaylas | Monitoreo UV en Tiempo Real</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
</head>
<body>
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <div class="logo-icon">‚òÄÔ∏è</div>
                    <div class="logo-text"><h1>SolarGuard</h1><p>Andahuaylas</p></div>
                </div>
                <nav class="nav-menu">
                    <a href="#inicio">Inicio</a>
                    <a href="#datos">Datos</a>
                    <a href="#mapa">Mapa</a>
                    <a href="#problema">Problema</a>
                    <a href="#enfermedades">Salud</a>
                </nav>
                <div class="header-right">
                    <div class="sensor-status-indicator">
                        <div class="status-dot" id="statusDot"></div>
                    </div>
                        <button class="alert-toggle-btn" id="alertToggleBtn" onclick="openAlertSettings()" title="Configurar Alertas UV">üîî</button>
                    </button>
                    <button class="theme-toggle" id="themeToggle" title="Cambiar tema"><span id="themeIcon">üåô</span></button>
                    <button class="export-btn" id="exportBtn" title="Exportar CSV" onclick="exportDataToCSV()">üì•</button>
                    <div class="career-logo"><img src="logodeepis.png" alt="Ingenier√≠a de Sistemas" ></div>
                </div>
            </div>
        </div>
    </header>

    <main class="main">
        <div class="container">
            <section id="inicio" class="hero">
                <h2 class="hero-title">Monitoreo UV en Tiempo Real</h2>
                <p class="hero-subtitle">Sistema de medici√≥n y alertas de radiaci√≥n solar para Andahuaylas, Apur√≠mac</p>
            </section>

            <div class="dashboard">
                <div class="card card-uv">
                    <div class="card-header">
                        <h3>‚òÄÔ∏è √çndice UV</h3>
                        <span class="update-time" id="updateTime">--:--:--</span>
                    </div>
                    <div class="card-body">
                        <div class="uv-meter">
                            <div class="uv-circle">
                                <svg class="uv-ring" viewBox="0 0 200 200">
                                    <circle class="uv-ring-bg" cx="100" cy="100" r="90"/>
                                    <circle class="uv-ring-progress" id="uvRing" cx="100" cy="100" r="90"/>
                                </svg>
                                <div class="uv-value-container">
                                    <div class="uv-value" id="uvValue">0.0</div>
                                    <div class="uv-level" id="uvLevel">Bajo</div>
                                </div>
                            </div>
                        </div>
                        <div class="uv-alert" id="uvAlert">‚è≥ Esperando datos...</div>
                    </div>
                </div>
                <div class="card card-light">
                    <div class="card-header"><h3>üí° Luz Ambiental</h3></div>
                    <div class="card-body">
                        <div class="light-display">
                            <div class="light-icon" id="lightIcon">üí°</div>
                            <div class="light-value" id="luxValue">0</div>
                            <div class="light-unit">lux</div>
                        </div>
                        <div class="light-description" id="lightDescription">Midiendo...</div>
                    </div>
                </div>
            </div>

            <div class="info-grid">
                <div class="info-card"><div class="info-icon">üìç</div><h4>Ubicaci√≥n</h4><p>Andahuaylas, Apur√≠mac</p><small>Altitud: 2,926 msnm</small></div>
                <div class="info-card" id="recommendationCard"><div class="info-icon">üõ°Ô∏è</div><h4>Recomendaci√≥n</h4><p id="recommendationText">Esperando datos...</p></div>
                <div class="info-card"><div class="info-icon">‚ö†Ô∏è</div><h4>Horas Peligrosas</h4><p>11:00 AM - 3:00 PM</p><small>Evitar exposici√≥n directa</small></div>
            </div>

            <section id="datos" class="section">
                <h2 class="section-title">üìä Datos Hist√≥ricos UV</h2>
                <p class="section-subtitle">An√°lisis de tendencias de radiaci√≥n solar en Andahuaylas</p>
                <div class="charts-grid">
                    <div class="chart-card"><h3>üìà √öltimas 24 Horas</h3><div class="chart-wrapper"><canvas id="chartDay"></canvas></div></div>
                    <div class="chart-card"><h3>üìä Esta Semana</h3><div class="chart-wrapper"><canvas id="chartWeek"></canvas></div></div>
                </div>
                <div class="stats-grid">
                    <div class="stat-box"><div class="stat-icon">üî•</div><div class="stat-value" id="maxUVToday">--</div><div class="stat-label">UV M√°ximo Hoy</div></div>
                    <div class="stat-box"><div class="stat-icon">üïê</div><div class="stat-value" id="peakTime">--:--</div><div class="stat-label">Hora Pico</div></div>
                    <div class="stat-box"><div class="stat-icon">üìÖ</div><div class="stat-value" id="avgWeek">--</div><div class="stat-label">Promedio Semanal</div></div>
                </div>
            </section>

            <section id="mapa" class="section">
                <h2 class="section-title">üó∫Ô∏è Mapa de Calor UV</h2>
                <p class="section-subtitle">Visualizaci√≥n de intensidad UV en tu ubicaci√≥n actual</p>
                <div class="map-container">
                    <div id="uvMap" class="uv-map"></div>
                    <div class="map-legend">
                        <h4>Leyenda UV:</h4>
                        <div class="legend-items">
                            <div class="legend-item"><span class="legend-color" style="background:#27ae60"></span><span>Bajo (0-2)</span></div>
                            <div class="legend-item"><span class="legend-color" style="background:#f39c12"></span><span>Moderado (3-5)</span></div>
                            <div class="legend-item"><span class="legend-color" style="background:#e67e22"></span><span>Alto (6-7)</span></div>
                            <div class="legend-item"><span class="legend-color" style="background:#e74c3c"></span><span>Muy Alto (8-10)</span></div>
                            <div class="legend-item"><span class="legend-color" style="background:#8e44ad"></span><span>Extremo (11+)</span></div>
                        </div>
                    </div>
                </div>
            </section>

            <section id="problema" class="section">
                <h2 class="section-title">üö® Problem√°tica Actual</h2>
                <p class="section-subtitle">Andahuaylas enfrenta niveles cr√≠ticos de radiaci√≥n solar</p>
                <div class="problem-grid">
                    <div class="problem-card"><div class="problem-icon">üî•</div><h3>Radiaci√≥n Extrema</h3><p>Niveles muy altos de radiaci√≥n UV que provocan quemaduras, cataratas y c√°ncer de piel.</p></div>
                    <div class="problem-card"><div class="problem-icon">üìµ</div><h3>Sin Sistema de Alertas</h3><p>No existen sistemas accesibles que midan y alerten en tiempo real.</p></div>
                    <div class="problem-card"><div class="problem-icon">‚ÑπÔ∏è</div><h3>Falta de Informaci√≥n</h3><p>La ausencia de datos confiables limita las medidas preventivas.</p></div>
                </div>
            </section>

            <section class="section solution-section">
                <h2 class="section-title">üí° Nuestra Soluci√≥n</h2>
                <p class="section-subtitle">Sistema integral de monitoreo y alertas UV</p>
                <div class="solution-grid">
                    <div class="solution-card"><div class="solution-icon">üî°</div><h3>Sensores IoT</h3><p>ESP32 con sensores GUVA-S12SD y BH1750.</p></div>
                    <div class="solution-card"><div class="solution-icon">‚òÅÔ∏è</div><h3>Nube Firebase</h3><p>Almacenamiento y sincronizaci√≥n 24/7.</p></div>
                    <div class="solution-card"><div class="solution-icon">üì±</div><h3>Web App</h3><p>Plataforma responsive con alertas autom√°ticas.</p></div>
                    <div class="solution-card"><div class="solution-icon">üìä</div><h3>An√°lisis de Datos</h3><p>Registro hist√≥rico y visualizaci√≥n de tendencias.</p></div>
                </div>
            </section>

            <section id="enfermedades" class="section">
                <h2 class="section-title">‚öïÔ∏è Enfermedades por Radiaci√≥n UV</h2>
                <p class="section-subtitle">Conoce los riesgos de la exposici√≥n prolongada al sol</p>
                <div class="diseases-container">
                    <div class="disease-card" onclick="toggleDisease(this)">
                        <div class="disease-header"><div class="disease-title"><span class="disease-icon">‚òÄÔ∏è</span><h3>Quemaduras Solares</h3></div><span class="disease-toggle">+</span></div>
                        <div class="disease-content"><div class="disease-badge riesgo-alto">Riesgo: Corto Plazo</div><p><strong>Descripci√≥n:</strong> Da√±o agudo en la piel por rayos UV.</p><h4>S√≠ntomas:</h4><ul><li>Enrojecimiento</li><li>Dolor</li><li>Ampollas</li></ul><h4>Prevenci√≥n:</h4><p>Protector solar SPF 30+, evitar sol 11AM-3PM.</p></div>
                    </div>
                    <div class="disease-card" onclick="toggleDisease(this)">
                        <div class="disease-header"><div class="disease-title"><span class="disease-icon">üëÅÔ∏è</span><h3>Cataratas</h3></div><span class="disease-toggle">+</span></div>
                        <div class="disease-content"><div class="disease-badge riesgo-alto">Riesgo: Largo Plazo</div><p><strong>Descripci√≥n:</strong> Opacidad del cristalino.</p><h4>S√≠ntomas:</h4><ul><li>Visi√≥n borrosa</li><li>Sensibilidad a luz</li></ul><h4>Prevenci√≥n:</h4><p>Gafas UV400, sombrero.</p></div>
                    </div>
                    <div class="disease-card critical" onclick="toggleDisease(this)">
                        <div class="disease-header"><div class="disease-title"><span class="disease-icon">‚ö†Ô∏è</span><h3>C√°ncer de Piel</h3></div><span class="disease-toggle">+</span></div>
                        <div class="disease-content"><div class="disease-badge riesgo-critico">Riesgo: CR√çTICO</div><p><strong>Regla ABCDE:</strong></p><ul><li><strong>A</strong>simetr√≠a</li><li><strong>B</strong>ordes irregulares</li><li><strong>C</strong>olor variado</li><li><strong>D</strong>i√°metro >6mm</li><li><strong>E</strong>voluci√≥n</li></ul><div class="disease-warning">‚ö†Ô∏è Consulta al dermat√≥logo ante lunares sospechosos.</div></div>
                    </div>
                    <div class="disease-card" onclick="toggleDisease(this)">
                        <div class="disease-header"><div class="disease-title"><span class="disease-icon">üë¥</span><h3>Fotoenvejecimiento</h3></div><span class="disease-toggle">+</span></div>
                        <div class="disease-content"><div class="disease-badge riesgo-medio">Riesgo: Mediano Plazo</div><p>Envejecimiento acelerado de la piel.</p><h4>S√≠ntomas:</h4><ul><li>Arrugas prematuras</li><li>Manchas</li></ul><h4>Prevenci√≥n:</h4><p>SPF 30+ diario.</p></div>
                    </div>
                </div>
            </section>

            <section class="section team-section">
                <h2 class="section-title">üë• Equipo de Desarrollo</h2>
                <div class="team-grid">
                    <div class="team-member"><div class="member-avatar">üë®‚Äçüíª</div><p class="member-name">Yunior Yuli√±o Maucaylle Chircca</p><p class="member-role">Desarrollador de Sistemas</p></div>
                    <div class="team-member"><div class="member-avatar">üîß</div><p class="member-name">Danny Huaman Zavala</p><p class="member-role">Desarrollador de Hardware</p></div>
                    <div class="team-member admin-access" onclick="openAdminLogin()" title="Click para admin">
                        <div class="member-avatar">üíª</div><p class="member-name">Jhermy Yupanqui Aquise</p><p class="member-role">Desarrollador de Software</p><span class="admin-hint">üîê</span>
                    </div>
                </div>
                <div class="university-info">
                    <h3>Universidad Nacional Jos√© Mar√≠a Arguedas</h3>
                    <p>Facultad de Ingenier√≠a - Escuela Profesional de Ingenier√≠a de Sistemas</p>
                    <p><strong>Docente:</strong> Roberto Quispe Quispe</p>
                    <p>Andahuaylas - Apur√≠mac - Per√∫ - 2025</p>
                </div>
            </section>
        </div>
    </main>

    <footer class="footer">
        <div class="container">
            <p>&copy; 2025 SolarGuard Andahuaylas | Universidad Nacional Jos√© Mar√≠a Arguedas</p>
        </div>
    </footer>

    <!-- MODAL LOGIN -->
    <div class="admin-login-modal" id="adminLoginModal" style="display:none">
        <div class="admin-login-box">
            <button class="close-modal" onclick="closeAdminLogin()">‚úï</button>
            <div class="login-header"><div class="login-icon">üîê</div><h2>Panel Administrador</h2><p>Editor de Datos UV</p></div>
            <form id="adminLoginForm" onsubmit="handleLogin(event)">
                <div class="form-group"><label>Usuario:</label><input type="text" id="adminUser" placeholder="Usuario" required></div>
                <div class="form-group"><label>Contrase√±a:</label><input type="password" id="adminPass" placeholder="Contrase√±a" required></div>
                <div class="login-error" id="loginError"></div>
                <button type="submit" class="btn-login">üîì Ingresar</button>
            </form>
            <p class="login-hint">üí° <b>jhermy</b> / <b>jhermy2025</b></p>
        </div>
    </div>

    <!-- PANEL ADMIN -->
    <div class="admin-panel-overlay" id="adminPanel" style="display:none">
        <div class="admin-panel">
            <div class="admin-header">
                <h2>‚òÄÔ∏è SolarGuard Admin</h2>
                <div class="admin-user"><span>üë§ Jhermy</span><button class="btn-logout" onclick="logoutAdmin()">üö™ Salir</button></div>
            </div>
            <div class="admin-content">
                <div class="admin-actions">
                    <button class="btn-primary" onclick="generateFakeData()">üìÑ Generar Datos</button>
                    <button class="btn-success" onclick="applyToCharts()">üìä Aplicar a Gr√°ficas</button>
                    <button class="btn-secondary" onclick="clearAllData()">üóëÔ∏è Limpiar</button>
                </div>
                <div id="updateNotice" style="display:none" class="update-notice">‚úÖ Datos aplicados a las gr√°ficas</div>
                <div class="historic-data-list" id="historicDataList"><p class="empty-message">Click "Generar Datos"</p></div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    
    <!-- CONTENEDOR DE ALERTAS UV -->
    <div id="alertContainer" class="alert-container"></div>
    <!-- MODAL DE CONFIGURACI√ìN DE ALERTAS -->
<!-- üìå REEMPLAZAR el modal existente de alertSettingsModal en index.html con este c√≥digo: -->

<div id="alertSettingsModal" class="alert-settings-modal">
    <div class="alert-settings-content">
        <div class="alert-settings-header">
            <h2>‚öôÔ∏è Configuraci√≥n de Alertas UV</h2>
            <button class="alert-settings-close" onclick="closeAlertSettings()">‚úï</button>
        </div>
        
        <div class="alert-settings-body">
            
            <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
            <!-- SECCI√ìN 1: ACTIVAR/DESACTIVAR ALERTAS -->
            <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
            <div class="setting-group">
                <div class="setting-header">
                    <h3>üîî Estado de Alertas</h3>
                    <label class="toggle-switch">
                        <input type="checkbox" id="alertEnabledToggle" checked>
                        <span class="toggle-slider"></span>
                    </label>
                </div>
                <p class="setting-description">
                    Activar o desactivar las alertas cuando la radiaci√≥n UV sea peligrosa
                </p>
            </div>
            
            <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
            <!-- SECCI√ìN 2: UMBRAL UV PERSONALIZABLE -->
            <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
            <div class="setting-group">
                <div class="setting-header">
                    <h3>üå°Ô∏è Nivel de Alerta Personalizado</h3>
                    <span class="threshold-value" id="alertThresholdValue">8.0</span>
                </div>
                <p class="setting-description">
                    Configura a partir de qu√© √≠ndice UV deseas recibir alertas
                </p>
                
                <div class="slider-container">
                    <input type="range" 
                           id="alertThresholdSlider" 
                           class="alert-threshold-slider"
                           min="3" 
                           max="15" 
                           step="0.5" 
                           value="8"
                           oninput="updateAlertThreshold(this.value)">
                    <div class="slider-labels">
                        <span>3<br><small>Moderado</small></span>
                        <span>6<br><small>Alto</small></span>
                        <span>8<br><small>Muy Alto</small></span>
                        <span>11<br><small>Extremo</small></span>
                        <span>15<br><small>M√°ximo</small></span>
                    </div>
                </div>
                
                <!-- Escala de colores UV -->
                <div class="uv-scale">
                    <div class="uv-scale-item">
                        <div class="uv-scale-color" style="background: #27ae60;"></div>
                        <span>Bajo (0-2)</span>
                    </div>
                    <div class="uv-scale-item">
                        <div class="uv-scale-color" style="background: #f39c12;"></div>
                        <span>Moderado (3-5)</span>
                    </div>
                    <div class="uv-scale-item">
                        <div class="uv-scale-color" style="background: #e67e22;"></div>
                        <span>Alto (6-7)</span>
                    </div>
                    <div class="uv-scale-item">
                        <div class="uv-scale-color" style="background: #e74c3c;"></div>
                        <span>Muy Alto (8-10)</span>
                    </div>
                    <div class="uv-scale-item">
                        <div class="uv-scale-color" style="background: #8e44ad;"></div>
                        <span>Extremo (11+)</span>
                    </div>
                </div>
            </div>
            
            <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
            <!-- SECCI√ìN 3: NOTIFICACIONES PUSH -->
            <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
            <div class="setting-group push-notification-section">
                <div class="setting-header">
                    <h3>üì± Notificaciones Push</h3>
                </div>
                <p class="setting-description">
                    Recibe alertas del sistema operativo incluso con la aplicaci√≥n cerrada
                </p>
                
                <!-- Estado de las notificaciones push -->
                <div id="pushNotificationStatus" class="push-notification-status">
                    <div class="push-status-item inactive">
                        <span class="push-status-icon">üîî</span>
                        <div class="push-status-text">
                            <strong>Notificaciones Push Disponibles</strong>
                            <small>Activa para recibir alertas incluso con la app cerrada</small>
                        </div>
                    </div>
                </div>
                
                <!-- Bot√≥n para activar notificaciones -->
                <button id="enablePushBtn" 
                        class="btn-enable-push" 
                        onclick="requestNotificationPermission()">
                    üîî Activar Notificaciones Push
                </button>
                
                <!-- Caracter√≠sticas de las notificaciones push -->
                <div class="push-features">
                    <div class="push-feature-item">
                        <span class="feature-icon">üì±</span>
                        <small>Alertas nativas del sistema</small>
                    </div>
                    <div class="push-feature-item">
                        <span class="feature-icon">üîä</span>
                        <small>Con sonido y vibraci√≥n</small>
                    </div>
                    <div class="push-feature-item">
                        <span class="feature-icon">‚è±Ô∏è</span>
                        <small>Funcionan en segundo plano</small>
                    </div>
                </div>
            </div>
            
            <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
            <!-- SECCI√ìN 4: VISTA PREVIA DE ALERTA -->
            <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
            <div class="setting-group">
                <h3>üëÅÔ∏è Vista Previa de Alerta</h3>
                <p class="setting-description">
                    As√≠ se ver√° la alerta visual en el dashboard
                </p>
                <div id="alertPreview" class="alert-preview dangerous">
                    <div class="alert-icon">üö®</div>
                    <div class="alert-content">
                        <div class="alert-title">üö® PELIGRO UV ALTO</div>
                        <div class="alert-message">¬°Radiaci√≥n UV peligrosa! Evite la exposici√≥n solar</div>
                        <div class="alert-uv-value">‚òÄÔ∏è UV: 8.0</div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <!-- PIE DEL MODAL -->
        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <div class="alert-settings-footer">
            <button class="btn-cancel" onclick="closeAlertSettings()">Cancelar</button>
            <button class="btn-save" onclick="saveAlertSettings()">üíæ Guardar Configuraci√≥n</button>
        </div>
    </div>
</div>

<!-- 
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
ESTILOS CSS ADICIONALES - Agregar al final de style.css
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
-->

<style>
/* ===== SECCI√ìN DE NOTIFICACIONES PUSH EN EL MODAL ===== */
.push-notification-section {
    background: linear-gradient(135deg, rgba(102, 126, 234, 0.05), rgba(118, 75, 162, 0.05));
    border: 2px solid rgba(102, 126, 234, 0.2);
    border-radius: 12px;
    padding: 20px !important;
}

.push-notification-status {
    margin: 15px 0;
}

.push-status-item {
    display: flex;
    align-items: center;
    gap: 15px;
    padding: 15px;
    border-radius: 10px;
    background: rgba(255, 255, 255, 0.05);
    border: 2px solid transparent;
    transition: all 0.3s ease;
}

.push-status-item.active {
    background: rgba(46, 204, 113, 0.1);
    border-color: #2ecc71;
}

.push-status-item.inactive {
    background: rgba(149, 165, 166, 0.1);
    border-color: rgba(149, 165, 166, 0.3);
}

.push-status-item.denied {
    background: rgba(231, 76, 60, 0.1);
    border-color: #e74c3c;
}

.push-status-item.unsupported {
    background: rgba(149, 165, 166, 0.1);
    border-color: rgba(149, 165, 166, 0.3);
    opacity: 0.6;
}

.push-status-icon {
    font-size: 32px;
    line-height: 1;
}

.push-status-text strong {
    display: block;
    font-size: 16px;
    margin-bottom: 5px;
    color: var(--text-primary);
}

.push-status-text small {
    display: block;
    font-size: 13px;
    color: var(--text-secondary);
}

/* ===== BOT√ìN ACTIVAR PUSH ===== */
.btn-enable-push {
    width: 100%;
    padding: 15px 25px;
    background: linear-gradient(135deg, #667eea, #764ba2);
    color: white;
    border: none;
    border-radius: 10px;
    font-size: 16px;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
    margin: 15px 0;
}

.btn-enable-push:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(102, 126, 234, 0.5);
}

.btn-enable-push:active {
    transform: scale(0.98);
}

/* ===== CARACTER√çSTICAS PUSH ===== */
.push-features {
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
    margin-top: 15px;
}

.push-feature-item {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 8px 15px;
    background: rgba(102, 126, 234, 0.1);
    border-radius: 8px;
    flex: 1;
    min-width: 150px;
}

.feature-icon {
    font-size: 20px;
}

.push-feature-item small {
    font-size: 12px;
    color: var(--text-secondary);
    font-weight: 500;
}

/* ===== BADGE EN BOT√ìN DE ALERTAS ===== */
.push-badge {
    position: absolute;
    top: -5px;
    right: -5px;
    background: linear-gradient(135deg, #2ecc71, #27ae60);
    color: white;
    font-size: 14px;
    width: 24px;
    height: 24px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 2px 8px rgba(46, 204, 113, 0.5);
    animation: pulse-badge 2s infinite;
    border: 2px solid var(--bg-primary);
}

@keyframes pulse-badge {
    0%, 100% {
        transform: scale(1);
        box-shadow: 0 2px 8px rgba(46, 204, 113, 0.5);
    }
    50% {
        transform: scale(1.1);
        box-shadow: 0 2px 12px rgba(46, 204, 113, 0.8);
    }
}

/* ===== PROMPT FLOTANTE ===== */
.notification-permission-prompt {
    position: fixed;
    top: 90px;
    right: 20px;
    z-index: 10000;
    animation: slideInRight 0.5s ease;
}

.permission-prompt-content {
    background: linear-gradient(135deg, #667eea, #764ba2);
    padding: 20px;
    border-radius: 16px;
    box-shadow: 0 10px 40px rgba(0,0,0,0.3);
    display: flex;
    align-items: center;
    gap: 15px;
    max-width: 400px;
    position: relative;
}

.permission-prompt-icon {
    font-size: 48px;
    filter: drop-shadow(0 4px 8px rgba(0,0,0,0.2));
}

.permission-prompt-text h4 {
    margin: 0 0 5px 0;
    color: white;
    font-size: 18px;
    font-weight: 700;
}

.permission-prompt-text p {
    margin: 0;
    color: rgba(255,255,255,0.9);
    font-size: 14px;
}

.btn-enable-notifications {
    background: white;
    color: #667eea;
    border: none;
    padding: 10px 20px;
    border-radius: 8px;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.3s ease;
    white-space: nowrap;
}

.btn-enable-notifications:hover {
    background: #f0f0f0;
    transform: scale(1.05);
}

.btn-dismiss-prompt {
    position: absolute;
    top: 10px;
    right: 10px;
    background: rgba(255,255,255,0.2);
    border: none;
    color: white;
    width: 28px;
    height: 28px;
    border-radius: 50%;
    cursor: pointer;
    font-size: 16px;
    transition: all 0.2s ease;
}

.btn-dismiss-prompt:hover {
    background: rgba(255,255,255,0.3);
}

/* ===== ANIMACIONES ===== */
@keyframes slideInRight {
    from {
        transform: translateX(500px);
        opacity: 0;
    }
    to {
        transform: translateX(0);
        opacity: 1;
    }
}

@keyframes slideOutRight {
    from {
        transform: translateX(0);
        opacity: 1;
    }
    to {
        transform: translateX(500px);
        opacity: 0;
    }
}

/* ===== RESPONSIVE ===== */
@media (max-width: 768px) {
    .notification-permission-prompt {
        right: 10px;
        left: 10px;
        top: 80px;
    }
    
    .permission-prompt-content {
        flex-direction: column;
        text-align: center;
        padding: 15px;
    }
    
    .push-features {
        flex-direction: column;
    }
    
    .push-feature-item {
        min-width: 100%;
    }
}
</style>
    
    <!-- MODAL DE EDICI√ìN DE DATOS -->
    <div id="editModal" class="edit-modal">
        <div class="edit-modal-content">
            <div class="edit-modal-header">
                <h2>‚úèÔ∏è Editar Registros</h2>
                <button class="edit-modal-close" onclick="closeEditModal()">‚úï Cerrar</button>
            </div>
            <div id="editRecordsContainer" class="edit-records-container"></div>
            <div class="edit-modal-actions">
                <button class="btn-cancel-edits" onclick="closeEditModal()">Cancelar</button>
                <button class="btn-save-edits" onclick="saveEdits()">üíæ Guardar Cambios</button>
            </div>
        </div>
    </div>
    
    <script src="main.js"></script>
</body>
</html>